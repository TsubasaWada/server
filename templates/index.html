<!DOCTYPE html>
<html>

<head>
    <title>テストアプリ</title>
    <script>
        const updateLux = async (url, element) => {
            const sensorData = await fetch(url)
                .then(response => response.text())
            const target = document.getElementById(element)
            const sensorNumber = Number(sensorData)
            target.innerHTML = `<h1>${sensorData}</h1>`
            if (sensorNumber >= 20){
                target.innerHTML = `<h1> 在室中 </h1>`
            }else if (sensorNumber < 20 ){
                target.innerHTML = `<h1> 外出中 </h1>`
            }else {
                target.innerHTML = `<h1> Error </h1>`
            }
        } 
    </script>
</head>

<body onLoad="updateLux('/lux', 'data')">
    <center>
        <div id="data">test</div>
        <input type="button" value="更新" onclick="updateLux('/lux', 'data')">
    </center>
</body>
